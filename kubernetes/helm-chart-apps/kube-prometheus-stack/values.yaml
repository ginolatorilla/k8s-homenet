fullnameOverride: kps

alertmanager:
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: "ingress-cert-issuer"
    hosts:
      - alertmanager.apps.homenet
    tls:
      - hosts:
          - alertmanager.apps.homenet
        secretName: alertmanager-ingress-tls

grafana:
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: "ingress-cert-issuer"
    hosts:
      - grafana.apps.homenet
    tls:
      - hosts:
          - grafana.apps.homenet
        secretName: grafana-ingress-tls
  grafana.ini:
    auth.generic_oauth:
      enabled: true
      name: Dex
      scopes: openid email profile groups offline_access
      auth_url: https://auth.apps.homenet/auth
      token_url: https://auth.apps.homenet/token
      api_url: https://auth.apps.homenet/userinfo
      client_id: $__file{/etc/secrets/auth_generic_oauth/client_id}
      client_secret: $__file{/etc/secrets/auth_generic_oauth/client_secret}
  extraSecretMounts:
    - name: auth-generic-oauth-secret-mount
      secretName: grafana-auth-generic-oauth-secret
      defaultMode: 0440
      mountPath: /etc/secrets/auth_generic_oauth
      readOnly: true

prometheus:
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: "ingress-cert-issuer"
    hosts:
      - prometheus.apps.homenet
    tls:
      - hosts:
          - prometheus.apps.homenet
        secretName: prometheus-ingress-tls

thanos-ruler:
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: "ingress-cert-issuer"
    hosts:
      - thanos-ruler.apps.homenet
    tls:
      - hosts:
          - thanos-ruler.apps.homenet
        secretName: thanos-ruler-ingress-tls
