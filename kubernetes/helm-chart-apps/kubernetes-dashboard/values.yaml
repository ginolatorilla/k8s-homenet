app:
  ingress:
    enabled: true
    hosts:
      - kubernetes-dashboard.apps.homenet
    ingressClassName: nginx
    issuer:
      name: ingress-cert-issuer
      scope: cluster

extras:
  manifests:
    - apiVersion: k8s.nginx.org/v1
      kind: TransportServer
      metadata:
        name: kubernetes-dashboard
        namespace: kubernetes-dashboard
      spec:
        listener:
          name: tls-passthrough
          protocol: TLS_PASSTHROUGH
        host: kubernetes-dashboard.apps.homenet
        upstreams:
          - name: kubernetes-dashboard-kong-proxy
            service: helm-chart-apps-kubernetes-dashboard-kong-proxy
            port: 443
        action:
          pass: kubernetes-dashboard-kong-proxy

    - apiVersion: v1
      kind: ServiceAccount
      metadata:
        name: admin-user
        namespace: kubernetes-dashboard

    - apiVersion: rbac.authorization.k8s.io/v1
      kind: ClusterRoleBinding
      metadata:
        name: kubernetes-dashboard-admin
      roleRef:
        apiGroup: rbac.authorization.k8s.io
        kind: ClusterRole
        name: cluster-admin
      subjects:
        - kind: ServiceAccount
          name: admin-user
          namespace: kubernetes-dashboard

    - apiVersion: v1
      kind: Secret
      metadata:
        name: admin-user
        namespace: kubernetes-dashboard
        annotations:
          kubernetes.io/service-account.name: "admin-user"
      type: kubernetes.io/service-account-token
